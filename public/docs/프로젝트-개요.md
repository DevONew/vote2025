# 프로젝트 개요

## 📊 Vote2025-Map

**2025년 대한민국 대통령 선거를 시각화하는 웹 애플리케이션**

---

## 🎯 프로젝트 목적

선거 결과를 카토그램(Cartogram) 지도로 시각화하여 지역별 투표 현황을 직관적으로 표시하고, 사용자가 대화형으로 선거 데이터를 탐색할 수 있도록 합니다.

---

## 🛠 기술 스택

- **프레임워크**: Next.js 15.3.4
- **라이브러리**: React 19.0.0
- **언어**: TypeScript 5
- **스타일링**: Tailwind CSS 3.4.17
- **Mock API**: MSW (Mock Service Worker) 2.10.2
- **패키지 매니저**: Yarn 4.9.2

---

## 📁 프로젝트 구조

```
src/
├── app/
│   ├── components/
│   │   ├── catogram/
│   │   │   └── CatogramRegion.tsx       # 지도 렌더링 컴포넌트
│   │   ├── layout/
│   │   │   ├── Header.tsx               # 헤더
│   │   │   └── Footer.tsx               # 푸터
│   │   ├── ui/
│   │   │   ├── CandidateCard.tsx        # 후보자 카드
│   │   │   ├── CandidateImage.tsx       # 후보자 이미지
│   │   │   ├── ElectionTurnoutCard.tsx  # 전국 투표율 카드
│   │   │   ├── PercentageBar.tsx        # 득표율 바
│   │   │   └── RegionTurnout.tsx        # 지역 투표율
│   │   └── MSWProvider.tsx              # MSW 초기화 Provider
│   ├── layout.tsx                       # 루트 레이아웃
│   ├── page.tsx                         # 메인 페이지
│   └── globals.css                      # 전역 스타일
├── constants/
│   ├── candidateMeta.ts                 # 후보자 정보 (3명)
│   └── regions.ts                       # 지역 SVG 좌표 데이터
├── hook/
│   └── useElectionData.ts               # 선거 데이터 로딩 훅
├── utils/
│   └── colorUtils.ts                    # 지역 색상 계산 유틸리티
└── mocks/
    ├── browser.ts                       # MSW 브라우저 설정
    ├── handler.ts                       # API Mock Handler
    └── mock-data.ts                     # 선거 데이터 (3981줄)
```

---

## 🔍 주요 컴포넌트

### 1. **CatogramRegion** - 카토그램 지도
- SVG 기반 한국 지역 지도 렌더링
- 1위 후보 정당 색상으로 지역 자동 색상화
- 마우스 호버 시 이벤트 발생
- 지역명 자동 분할 및 표시
- 파일 위치: `src/app/components/catogram/CatogramRegion.tsx`

### 2. **ElectionTurnoutCard** - 전국 투표율
- 전국 합계 데이터(0번 인덱스) 표시
- 투표일, 투표자 수, 유권자 수 동적 표시
- 전국 투표율 실시간 업데이트
- 파일 위치: `src/app/components/ui/ElectionTurnoutCard.tsx`

### 3. **RegionTurnout** - 지역 투표율
- 호버된 지역 또는 디폴트 지역(서울 중구) 정보 표시
- 총 투표수 및 투표율 동적 표시
- 지역명 줄바꿈 및 여백 자동 처리
- 파일 위치: `src/app/components/ui/RegionTurnout.tsx`

### 4. **CandidateCard** - 후보자 카드
- 1위 후보자 정보 동적 표시
- 후보자 이미지, 이름, 정당 실시간 업데이트
- 득표율 및 득표수 동적 표시
- 득표율 바 차트 포함
- 파일 위치: `src/app/components/ui/CandidateCard.tsx`

### 5. **MSWProvider** - Mock Service Worker 초기화
- 개발 환경에서 MSW 자동 시작
- Service Worker 초기화 관리
- 파일 위치: `src/app/components/MSWProvider.tsx`

### 6. **useElectionData** - 선거 데이터 훅
- API 데이터 페칭 로직
- 로딩/에러 상태 관리
- 파일 위치: `src/hook/useElectionData.ts`

### 7. **colorUtils** - 색상 계산 유틸리티
- 지역명과 선거 데이터 매칭
- 1위 후보 정당 색상 계산
- 파일 위치: `src/utils/colorUtils.ts`

---

## 📊 데이터 구조

### 후보자 정보 (candidateMeta.ts)
```typescript
{
  '이재명': {
    image: '/images/candidate/이재명.png',
    partyColor: '#1E7DD6',  // 더불어민주당
  },
  '김문수': {
    image: '/images/candidate/김문수.png',
    partyColor: '#E61D1D',  // 국민의힘
  },
  '이준석': {
    image: '/images/candidate/이준석.png',
    partyColor: '#F9A825',  // 개혁신당
  }
}
```

### 선거 데이터 (mock-data.ts)
- 전국, 시도, 시군구 단위의 상세 데이터
- 총 3,981줄의 데이터
- 각 레코드 포함 정보:
  - `sdName`: 시도명
  - `cityName`: 시군구명
  - `sunsu`: 선거인 수
  - `tusu`: 투표 수
  - `yutusu`: 유효 투표 수
  - `dugsu01~03`: 후보자별 득표 수
  - `jd01~03`: 정당명
  - `hbj01~03`: 후보자명
  - `turnout`: 투표율 (%)
  - `vote01~03`: 득표율 (%)

### 지역 좌표 데이터 (regions.ts)
- 각 지역의 SVG polygon 좌표
- 카토그램 형태의 왜곡된 지도 좌표
- 지역 ID와 polygon 좌표 배열

---

## ✅ 현재 구현 상태

### 완료된 기능
- ✅ 기본 UI 레이아웃 구성
- ✅ 카토그램 지도 SVG 렌더링
- ✅ 후보자 메타데이터 정의
- ✅ Mock API 설정 및 활성화 (MSW)
- ✅ 상세한 선거 데이터 준비 (3,981줄)
- ✅ 헤더/푸터 레이아웃
- ✅ UI 컴포넌트 동적 데이터 연동
- ✅ Mock API 데이터 페칭 (useElectionData)
- ✅ 지도 호버 상호작용 구현
- ✅ 지역별 색상 시각화 (1위 후보 정당 색상)
- ✅ 동적 데이터 표시 (모든 하드코딩 제거)
- ✅ 상태 관리 구현 (useState)
- ✅ 실시간 지역 정보 업데이트

### 미완성 기능
- ❌ 지도 클릭 기능 (현재는 호버만 가능)
- ❌ 후보자 전환 기능 (3명 후보자 중 선택)
- ❌ 지역 검색 기능
- ❌ 통계 차트
- ❌ 반응형 디자인 최적화
- ❌ 애니메이션 효과

---

## 🚀 향후 개발 계획

### ~~Phase 1: 데이터 연동 및 상태 관리~~ ✅ 완료
1. ~~Mock API 호출 로직 구현~~ ✅
2. ~~React 상태 관리 (useState)~~ ✅
3. ~~데이터 기반 UI 업데이트~~ ✅

### ~~Phase 2: 지도 상호작용~~ ✅ 완료
1. ~~지역 호버 기능~~ ✅
2. ~~선택된 지역 데이터 표시~~ ✅
3. 지역 클릭 고정 기능 (예정)

### ~~Phase 3: 지도 색상 시각화~~ ✅ 완료
1. ~~득표율 기반 색상 계산~~ ✅
2. ~~1위 후보 정당 색상 적용~~ ✅

### Phase 4: 후보자 필터링 (다음 단계)
1. 후보자 선택 UI 구현
2. 선택된 후보자 기준으로 지도/카드 업데이트
3. 후보자별 득표 현황 비교

### Phase 5: 추가 기능
1. 지역 검색 기능
2. 통계 차트 (득표율 분포, 투표율 비교)
3. 반응형 디자인 최적화
4. 부드러운 전환 애니메이션
5. 지역 계층 네비게이션 (전국 → 시도 → 시군구)

---

## 🎨 UI/UX 특징

### 레이아웃
- **2단 레이아웃**: 왼쪽 지도 (1000px) + 오른쪽 정보 패널 (300px)
- **반응형**: Tailwind CSS 기반 반응형 디자인
- **시각적 계층**: 헤더 → 메인 콘텐츠 → 푸터

### 디자인 시스템
- **색상 팔레트**: 정당별 고유 색상
  - 더불어민주당: #1E7DD6 (파랑)
  - 국민의힘: #E61D1D (빨강)
  - 개혁신당: #F9A825 (노랑)
- **타이포그래피**: 계층적 폰트 크기 및 굵기
- **간격**: 일관된 패딩/마진 시스템
- **인터랙션**: 마우스 호버 시 커서 포인터 및 실시간 데이터 업데이트

---

## 📝 개발 가이드

### 로컬 개발 서버 실행
```bash
yarn dev
```

### 빌드
```bash
yarn build
```

### 프로덕션 서버 실행
```bash
yarn start
```

### 린트
```bash
yarn lint
```

---

## 📌 주요 파일 위치

| 파일 | 경로 | 설명 |
|------|------|------|
| 메인 페이지 | `src/app/page.tsx` | 루트 페이지 컴포넌트, 상태 관리 |
| 지도 컴포넌트 | `src/app/components/catogram/CatogramRegion.tsx` | 카토그램 지도, 호버 이벤트 |
| 후보자 정보 | `src/constants/candidateMeta.ts` | 후보자 메타데이터 |
| 선거 데이터 | `src/mocks/mock-data.ts` | Mock 선거 데이터 (3,981줄) |
| 지역 좌표 | `src/constants/regions.ts` | SVG 지역 좌표 |
| API 핸들러 | `src/mocks/handler.ts` | MSW API 핸들러 |
| 데이터 훅 | `src/hook/useElectionData.ts` | 선거 데이터 페칭 훅 |
| 색상 유틸 | `src/utils/colorUtils.ts` | 지역 색상 계산 로직 |
| MSW Provider | `src/app/components/MSWProvider.tsx` | MSW 초기화 |

---

## 🔗 참고 자료

- [Next.js 문서](https://nextjs.org/docs)
- [React 문서](https://react.dev/)
- [Tailwind CSS 문서](https://tailwindcss.com/docs)
- [MSW 문서](https://mswjs.io/)

---

## 🎯 주요 구현 기능 요약

### 데이터 흐름
1. **MSWProvider** → Service Worker 초기화
2. **useElectionData** → `/api/election` 호출 (MSW가 가로채서 mock-data 반환)
3. **page.tsx** → 데이터 수신 및 상태 관리
4. **호버 이벤트** → `hoveredRegionId` 상태 변경
5. **리렌더링** → 카드 컴포넌트에 새 데이터 전달
6. **실시간 업데이트** → 후보자, 지역 정보 동적 표시

### 색상 시각화
- 각 지역의 선거 데이터에서 1위 후보 자동 계산
- 1위 후보의 정당 색상을 지도에 적용
- 회색 지역 = 데이터 없음

### 성능 최적화
- API 호출은 최초 1회만 실행
- 이후 모든 업데이트는 메모리 데이터 재사용
- Virtual DOM으로 최소 DOM 조작
- 호버 시 부드러운 리렌더링

---

**마지막 업데이트**: 2025-12-05
**작성자**: DevONew
**프로젝트 상태**: 개발 진행 중 (Phase 3 완료, Phase 4 예정)
